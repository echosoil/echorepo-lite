services:
  echorepo-lite:
    environment:
      APP_ENV: dev
      FLASK_DEBUG: "1"
    ports:
      - "127.0.0.1:18080:8000"   # app
      - "127.0.0.1:5678:5678"    # debugpy (only loopback)
    command: >
      python -m debugpy --listen 0.0.0.0:5678 --wait-for-client
      -m gunicorn -w 1 -b 0.0.0.0:8000
      --timeout 120 --graceful-timeout 120 --keep-alive 5
      --reload
      echorepo.wsgi:app

  postgres:
    ports:
      - "5433:5432"
